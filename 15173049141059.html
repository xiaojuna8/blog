<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  Linux页缓存 - 记录
  
  </title>
 <meta name="description" content="记录工作上的知识点">
 <link href="atom.xml" rel="alternate" title="记录" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">记录</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; 记录</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>C++</label></li>

          
            <li><a title="gcc第三方库文件目录" href="15173624959342.html">gcc第三方库文件目录</a></li>
          
            <li><a title="字符编码" href="15173053129472.html">字符编码</a></li>
          
            <li><a title="跨平台C／C++系统／编译器检测" href="15173052079033.html">跨平台C／C++系统／编译器检测</a></li>
          
            <li><a title="curl库编译" href="15173051110022.html">curl库编译</a></li>
          
            <li><a title="GCC编译动态库" href="15173051110801.html">GCC编译动态库</a></li>
          
            <li><a title="GCC编译静态库" href="15173051111098.html">GCC编译静态库</a></li>
          
            <li><a title="openssl编译" href="15173051111412.html">openssl编译</a></li>
          
            <li><a title="全局变量" href="15173051111702.html">全局变量</a></li>
          
            <li><a title="编译器预定义宏" href="15173044802818.html">编译器预定义宏</a></li>
          
            <li><a title="Makefile" href="15173044568587.html">Makefile</a></li>
          
            <li><a title="命令行参数解析" href="15173044214676.html">命令行参数解析</a></li>
          
            <li><a title="C++多线程" href="15173028055344.html">C++多线程</a></li>
          
            <li><a title="C++ 输入输出流" href="15172827779506.html">C++ 输入输出流</a></li>
          

      
        <li class="divider"></li>
        <li><label>Xcode</label></li>

          
            <li><a title="XCode" href="15173027753385.html">XCode</a></li>
          
            <li><a title="Git" href="15173027520921.html">Git</a></li>
          
            <li><a title="lldb" href="15172828404139.html">lldb</a></li>
          

      
        <li class="divider"></li>
        <li><label>Linux</label></li>

          
            <li><a title="Shell 脚本" href="15173027148008.html">Shell 脚本</a></li>
          
            <li><a title="Linux基本指令" href="15173026872373.html">Linux基本指令</a></li>
          
            <li><a title="cenos 安装 gcc/clang" href="15173026443060.html">cenos 安装 gcc/clang</a></li>
          

      
        <li class="divider"></li>
        <li><label>Crypt</label></li>

          
            <li><a title="Intel random number generator" href="15173049140113.html">Intel random number generator</a></li>
          
            <li><a title="Linux /dev/random" href="15173049140539.html">Linux /dev/random</a></li>
          
            <li><a title="Linux同步IO" href="15173049140754.html">Linux同步IO</a></li>
          
            <li><a title="Linux页缓存" href="15173049141059.html">Linux页缓存</a></li>
          
            <li><a title="OpenSSH" href="15173049141355.html">OpenSSH</a></li>
          
            <li><a title="RSA简介" href="15173049141721.html">RSA简介</a></li>
          
            <li><a title="Slat" href="15173049142023.html">Slat</a></li>
          
            <li><a title="SHA" href="15173049142331.html">SHA</a></li>
          
            <li><a title="SM9加密" href="15173049142669.html">SM9加密</a></li>
          
            <li><a title="SM9数字签名" href="15173049142971.html">SM9数字签名</a></li>
          
            <li><a title="SM9特点" href="15173049143327.html">SM9特点</a></li>
          
            <li><a title="SM9代码注释" href="15173049143691.html">SM9代码注释</a></li>
          
            <li><a title="Ciphertext stealing" href="15173049143733.html">Ciphertext stealing</a></li>
          
            <li><a title="分组加密的加密模式" href="15173049143929.html">分组加密的加密模式</a></li>
          
            <li><a title="加密key生成" href="15173049143979.html">加密key生成</a></li>
          
            <li><a title="密码学安全随机数" href="15173049144029.html">密码学安全随机数</a></li>
          
            <li><a title="数据加密方式比较" href="15173049144073.html">数据加密方式比较</a></li>
          
            <li><a title="文件加密解密流程" href="15173049144311.html">文件加密解密流程</a></li>
          
            <li><a title="椭圆曲线密码学" href="15173049144364.html">椭圆曲线密码学</a></li>
          
            <li><a title="消息认证码" href="15173049144611.html">消息认证码</a></li>
          
            <li><a title="认证加密" href="15173049144928.html">认证加密</a></li>
          
            <li><a title="随机数检测规范" href="15173049145208.html">随机数检测规范</a></li>
          
            <li><a title="AES" href="15173049138687.html">AES</a></li>
          
            <li><a title="AES测试实例" href="15173049139197.html">AES测试实例</a></li>
          
            <li><a title="ECC性能" href="15173049139393.html">ECC性能</a></li>
          
            <li><a title="基于标识的加密" href="15173049139748.html">基于标识的加密</a></li>
          

      
        <li class="divider"></li>
        <li><label>Computer</label></li>

          
            <li><a title="磁盘传输" href="15173050634716.html">磁盘传输</a></li>
          

      
        <li class="divider"></li>
        <li><label>genome</label></li>

          
            <li><a title="Illumina Sequencing" href="15173054141309.html">Illumina Sequencing</a></li>
          
            <li><a title="Illumina二代测序原理" href="15173054141798.html">Illumina二代测序原理</a></li>
          
            <li><a title="DNA基本关系" href="15173054025402.html">DNA基本关系</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>C++</span></li>
                        
                          <li><a title="gcc第三方库文件目录" href="15173624959342.html">gcc第三方库文件目录</a></li>
                        
                          <li><a title="字符编码" href="15173053129472.html">字符编码</a></li>
                        
                          <li><a title="跨平台C／C++系统／编译器检测" href="15173052079033.html">跨平台C／C++系统／编译器检测</a></li>
                        
                          <li><a title="curl库编译" href="15173051110022.html">curl库编译</a></li>
                        
                          <li><a title="GCC编译动态库" href="15173051110801.html">GCC编译动态库</a></li>
                        
                          <li><a title="GCC编译静态库" href="15173051111098.html">GCC编译静态库</a></li>
                        
                          <li><a title="openssl编译" href="15173051111412.html">openssl编译</a></li>
                        
                          <li><a title="全局变量" href="15173051111702.html">全局变量</a></li>
                        
                          <li><a title="编译器预定义宏" href="15173044802818.html">编译器预定义宏</a></li>
                        
                          <li><a title="Makefile" href="15173044568587.html">Makefile</a></li>
                        
                          <li><a title="命令行参数解析" href="15173044214676.html">命令行参数解析</a></li>
                        
                          <li><a title="C++多线程" href="15173028055344.html">C++多线程</a></li>
                        
                          <li><a title="C++ 输入输出流" href="15172827779506.html">C++ 输入输出流</a></li>
                        

                    
                      <li class="side-title"><span>Xcode</span></li>
                        
                          <li><a title="XCode" href="15173027753385.html">XCode</a></li>
                        
                          <li><a title="Git" href="15173027520921.html">Git</a></li>
                        
                          <li><a title="lldb" href="15172828404139.html">lldb</a></li>
                        

                    
                      <li class="side-title"><span>Linux</span></li>
                        
                          <li><a title="Shell 脚本" href="15173027148008.html">Shell 脚本</a></li>
                        
                          <li><a title="Linux基本指令" href="15173026872373.html">Linux基本指令</a></li>
                        
                          <li><a title="cenos 安装 gcc/clang" href="15173026443060.html">cenos 安装 gcc/clang</a></li>
                        

                    
                      <li class="side-title"><span>Crypt</span></li>
                        
                          <li><a title="Intel random number generator" href="15173049140113.html">Intel random number generator</a></li>
                        
                          <li><a title="Linux /dev/random" href="15173049140539.html">Linux /dev/random</a></li>
                        
                          <li><a title="Linux同步IO" href="15173049140754.html">Linux同步IO</a></li>
                        
                          <li><a title="Linux页缓存" href="15173049141059.html">Linux页缓存</a></li>
                        
                          <li><a title="OpenSSH" href="15173049141355.html">OpenSSH</a></li>
                        
                          <li><a title="RSA简介" href="15173049141721.html">RSA简介</a></li>
                        
                          <li><a title="Slat" href="15173049142023.html">Slat</a></li>
                        
                          <li><a title="SHA" href="15173049142331.html">SHA</a></li>
                        
                          <li><a title="SM9加密" href="15173049142669.html">SM9加密</a></li>
                        
                          <li><a title="SM9数字签名" href="15173049142971.html">SM9数字签名</a></li>
                        
                          <li><a title="SM9特点" href="15173049143327.html">SM9特点</a></li>
                        
                          <li><a title="SM9代码注释" href="15173049143691.html">SM9代码注释</a></li>
                        
                          <li><a title="Ciphertext stealing" href="15173049143733.html">Ciphertext stealing</a></li>
                        
                          <li><a title="分组加密的加密模式" href="15173049143929.html">分组加密的加密模式</a></li>
                        
                          <li><a title="加密key生成" href="15173049143979.html">加密key生成</a></li>
                        
                          <li><a title="密码学安全随机数" href="15173049144029.html">密码学安全随机数</a></li>
                        
                          <li><a title="数据加密方式比较" href="15173049144073.html">数据加密方式比较</a></li>
                        
                          <li><a title="文件加密解密流程" href="15173049144311.html">文件加密解密流程</a></li>
                        
                          <li><a title="椭圆曲线密码学" href="15173049144364.html">椭圆曲线密码学</a></li>
                        
                          <li><a title="消息认证码" href="15173049144611.html">消息认证码</a></li>
                        
                          <li><a title="认证加密" href="15173049144928.html">认证加密</a></li>
                        
                          <li><a title="随机数检测规范" href="15173049145208.html">随机数检测规范</a></li>
                        
                          <li><a title="AES" href="15173049138687.html">AES</a></li>
                        
                          <li><a title="AES测试实例" href="15173049139197.html">AES测试实例</a></li>
                        
                          <li><a title="ECC性能" href="15173049139393.html">ECC性能</a></li>
                        
                          <li><a title="基于标识的加密" href="15173049139748.html">基于标识的加密</a></li>
                        

                    
                      <li class="side-title"><span>Computer</span></li>
                        
                          <li><a title="磁盘传输" href="15173050634716.html">磁盘传输</a></li>
                        

                    
                      <li class="side-title"><span>genome</span></li>
                        
                          <li><a title="Illumina Sequencing" href="15173054141309.html">Illumina Sequencing</a></li>
                        
                          <li><a title="Illumina二代测序原理" href="15173054141798.html">Illumina二代测序原理</a></li>
                        
                          <li><a title="DNA基本关系" href="15173054025402.html">DNA基本关系</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>Linux页缓存</h1>

<p>原文参考：<a href="http://www.swexception.com/a/linux-unix/linux-unix/2016/1231/2151226.html">Linux页高速缓存跟页回写</a></p>

<ul>
<li>
<a href="#toc_0">缓存手段</a>
<ul>
<li>
<a href="#toc_1">写缓存</a>
</li>
<li>
<a href="#toc_2">缓存回收</a>
<ul>
<li>
<a href="#toc_3">最近最少使用</a>
</li>
<li>
<a href="#toc_4">双链表策略</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#toc_5">flusher线程</a>
</li>
<li>
<a href="#toc_6">查看页缓存大小</a>
</li>
</ul>


<p>页高速缓存(cache memory)是Linux内核实现磁盘缓存。它主要用来减少对磁盘I/O操作。是通过把磁盘中的数据缓存到物理内存中，把对磁盘的访问变为对物理内存的访问。</p>

<p>磁盘高速缓存有两个重要因素：第一，访问磁盘的速度要远低于访问内存的速度，若从处理器L1和L2高速缓存访问则速度更快。第二，数据一旦被访问，就很有可能短时间内再次访问。正是由于基于访问内存比磁盘快的多，所以磁盘的内存缓存将给系统存储性能带来质的飞越。</p>

<blockquote>
<p>文件 Cache 管理指的就是对这些由操作系统分配，并用来存储文件数据的内存的管理。 Cache 管理的优劣通过两个指标衡量：一是 Cache 命中率，Cache 命中时数据可以直接从内存中获取，不再需要访问低速外设，因而可以显著提高性能；二是有效 Cache 的比率，有效 Cache 是指真正会被访问到的 Cache 项，如果有效 Cache 的比率偏低，则相当部分磁盘带宽会被浪费到读取无用 Cache 上，而且无用 Cache 会间接导致系统内存紧张，最后可能会严重影响性能。</p>
</blockquote>

<h2 id="toc_0">缓存手段</h2>

<p>页高速缓存是由内存中的物理页面组成的，其内容对应磁盘上的物理块。页高速缓存大小能动态调整--它可以通过占用空闲内存以扩张大小，也可以自我收缩以缓解内存使用压力。我们称正被缓存的存储设备为后备存储，因为缓存背后的磁盘无疑才是所有缓存数据的归属。当内核开始一个读操作，它首先会检查需要的数据是否在页高速缓存中。如果在则放弃访问磁盘，而直接从内存中读取。这个行为称为缓存命中。如果数据没有在缓存中，称为缓存未命中，那么内核必须调度块I/O操作从磁盘去读取数据。然后内核将读来的数据放入页缓存中，于是任何后续相同的数据读取都可以命中缓存了。系统不一定要将整个文件都缓存，可以缓存文件的一页或几页，到底缓存谁取决于谁被访问到。</p>

<h3 id="toc_1">写缓存</h3>

<p>缓存一般被实现成下面三种策略之一：</p>

<p>第一种策略称为不缓存(nowrite)，也就是说高速缓存不去缓存任何写操作。当对一个缓存中的数据片进行写时，将直接跳过缓存，写到磁盘，同时也使缓存中的数据失效。那么如果后续读操作进行时，需要再重新从磁盘中读取数据。这种策略很少使用。</p>

<p>第二种策略，写操作将自动更新内存缓存，同时也更新磁盘文件。这种方式，通常称为写透缓存（write-through cache），因为写操作会立刻穿透缓存到磁盘中。这种策略对保持缓存一直性很有好处---缓存数据时刻与后备存储保持同步，所以不需要让缓存失效，同时它的实现也最简单。</p>

<p>第三种策略，称为“回写”。在这种策略下，程序执行写操作直接写到缓存中，后端存储不会立刻直接更新，而是将页高速缓存中被写入的页面标记成“脏Dirty”，并且被加入到脏页链表中。然后由一个进程周期性将脏页链表中的页写回到磁盘，从而让磁盘中的数据和内存中最终一致。最后清理“脏”页标识。实际上脏的并不是高速缓存中的数据而是磁盘上的数据（过时了）。更好的描述方式是未同步。通常认为回写策略要好于写透策略。</p>

<h3 id="toc_2">缓存回收</h3>

<p>缓存算法最后涉及的最重要内容是缓存中的数据如何清除，或者是为更重要的缓存项腾出位置，或者是收缩缓存大小。这个工作，也就是决定缓存中什么内容将被清除的策略，称为缓存回收策略。Linux的缓存回收是通过选择干净页进行简单替换。如果缓存中没有足够的干净页面，内核将强制地进行回写操作，以腾出更多的干净可用也。最难的事情在于决定什么页应该回收。理想的回收策略应该是回收那些以后最不可能使用的页面。</p>

<h4 id="toc_3">最近最少使用</h4>

<p>缓存回收策略通过所访问的数据特性，尽量最求预测效率。最成功的算法（特别是对于通用目的的页高速缓存）称作最近最少使用算法，简称LRU。LRU回收策略需要跟踪每个页面的访问踪迹（或者至少按照访问时间为序的页链表），以便能回收最老时间戳的页面（或者回收排序链表头所指的页面）。该策略的良好效果源自于缓存的数据越久未被访问，则越不大可能近期再访问，而最近被访问的最有可能被再次访问。但是LRU策略并非是放之四海皆准的法则，对于许多文件被访问一次，再不被访问的情景，LRU尤其失败。将这些页面放在LRU链表的顶端显然不是最优，当然，内核并没办法知道一个文件只会被访问一次，但是它却知道过去访问了多少次。</p>

<h4 id="toc_4">双链表策略</h4>

<p>Linux实现的是一个修改过的LRU，也称为双链策略。和以前不同，Linux维护的不再是一个LRU链表，而是维护两个链表：活跃链表和非活跃链表。处于活跃链表上的页面被认为是“热”的且不会被换出，而在非活跃链表上的页面则是可以被换出的。在活跃链表中的页面必须在其被访问时就处于非活跃链表中。两个链表都被伪LRU规则维护：页面从尾部加入，从头部移除，如同队列。两个链表需要维持平衡--如果活跃链表变得过多而超过了非活跃链表，那么活跃链表的头页面将被重新移回到非活跃链表中，以便能再被回收。双链表策略解决了传统LRU算法中对仅一次访问的窘境。而且也更加简单的实现了伪LRU语义。这种双链表方式也称作LRU/2。更普遍的是n个链表，故称LRU /n。</p>

<p>假设你正在开发一个很大的软件工程那么你将有大量的源文件被打开，只要你打开读取源文件，这些文件就将被存储在页高速缓存中。只要数据被缓存，那么从一个文件跳到另一个文件将瞬间完成。当编辑文件时，存储文件也会瞬间完成，因为写操作只需要写到内存，而不是磁盘。编译项目时，缓存的文件将使得编译过程更少访问磁盘，所以编译速度也就更快了。如果整个源码树太大了，无法一次性放入内存，那么其中一部分必须被回收--由于双链表策略，任何回收的文件都将处于非活跃链表，而且不大可能是正在编译的文件。在没编译的时候，内核会执行页回写，刷新所修改的文件的磁盘副本。由此可见，缓存将极大地提高系统性能。</p>

<h2 id="toc_5">flusher线程</h2>

<p>由于页高速缓存的缓存作用，写操作实际上会被延迟。当页高速缓存中的数据比后台存储的数据更新时，该数据就称作脏数据。在内存中累积起来的脏页最终被写回磁盘。在以下三种情况发生时，脏页被写回磁盘：</p>

<ul>
<li>当空闲内存低于一个特定阈值时，内核必须将脏页写回磁盘以便释放内存，因为只有干净内存才可以被回收。当内存干净后，内核就可以从缓存清理数据，然后收缩缓存，最终释放出更多内存。</li>
<li>当脏页的内存中驻留时间超过一个特定的阈值时，内核必须将超时的脏页回写磁盘，以确保脏页不会无限期地驻留在内存中。</li>
<li>当用户进程调用sync()和fsync()方法时，内核会按照要求执行回写动作。</li>
</ul>

<p>flusher会被周期的唤醒处理过久的脏页数据。如果系统崩溃，没有来得及写回磁盘的脏页就会丢。</p>

<h2 id="toc_6">查看页缓存大小</h2>

<p>linux上有两种方式查看页缓存大小，一种是free命令，其中cache列卫页缓存大小，单位Byte</p>

<pre><code>free
              total        used        free      shared  buff/cache   available
Mem:      528082808     3969248   499416284       18132    24697276   522514336
Swap:       4194300           0     4194300

//可读性更佳
free -h
              total        used        free      shared  buff/cache   available
Mem:           503G        3.8G        476G         17M         23G        498G
Swap:          4.0G          0B        4.0G
</code></pre>

<p><img src="http://s3.51cto.com/wyfs02/M00/5C/36/wKioL1Uc0aGRKxnJAAHgjMWscjU447.jpg" alt=""/></p>

<p>另一种是直接查看cat /proc/meminfo</p>

<pre><code>MemTotal:       528082808 kB
MemFree:        499415472 kB
MemAvailable:   522513556 kB
Buffers:           24016 kB
Cached:         23712088 kB
SwapCached:            0 kB
Active:         12225912 kB
Inactive:       12290556 kB
Active(anon):     781924 kB
Inactive(anon):    16584 kB
Active(file):   11443988 kB
Inactive(file): 12273972 kB
Unevictable:           0 kB
Mlocked:               0 kB
SwapTotal:       4194300 kB
SwapFree:        4194300 kB
Dirty:                12 kB
Writeback:             0 kB
AnonPages:        780428 kB
Mapped:           108272 kB
Shmem:             18132 kB
Slab:             961268 kB
SReclaimable:     780356 kB
SUnreclaim:       180912 kB
KernelStack:       14736 kB
PageTables:        15840 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:    268235704 kB
Committed_AS:    3061544 kB
VmallocTotal:   34359738367 kB
VmallocUsed:     1144720 kB
VmallocChunk:   34089973756 kB
HardwareCorrupted:     0 kB
AnonHugePages:    577536 kB
HugePages_Total:       0
HugePages_Free:        0
HugePages_Rsvd:        0
HugePages_Surp:        0
Hugepagesize:       2048 kB
DirectMap4k:      273152 kB
DirectMap2M:     4874240 kB
DirectMap1G:    533725184 kB
</code></pre>

<ul>
<li><code>Cached</code> — The amount of physical RAM, in kilobytes, used as cache memory.</li>
<li><code>Writeback</code> — The total amount of memory, in kilobytes, actively being written back to the disk.</li>
</ul>

<pre><code>cat /proc/meminfo |grep Dirty
Dirty:            515440 kB

cat /proc/meminfo |grep Write
Writeback:         39396 kB
WritebackTmp:          0 kB
</code></pre>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="15173049140754.html"  title="Previous Post: Linux同步IO">&laquo; Linux同步IO</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="15173049141355.html" 
	        title="Next Post: OpenSSH">OpenSSH &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '15173049141059.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>
    <script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>

  </body>
</html>
